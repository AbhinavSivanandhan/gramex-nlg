import:
  ui:
    path: $GRAMEXAPPS/ui/gramex.yaml    # Import the UI components
    YAMLURL: $YAMLURL/app/ui/               # ... at this URL
    namespace: [url]
url:
  nlg-landing-page-$*:
    pattern: /$YAMLURL/
    handler: FileHandler
    kwargs:
      path: $YAMLPATH/app/grmform.html
  uploadhandler-$*:
    pattern: /$YAMLURL/upload
    handler: UploadHandler
    kwargs:
      headers:
        Cache-Control: no-store
      path: $YAMLPATH/app/gramupload/
      if_exists: overwrite
      xsrf_cookies: false
      redirect:
        url: /$YAMLURL/app/index.html
  tablepreview-$*:
    pattern: /$YAMLURL/app/_preview
    handler: FormHandler
    kwargs:
      url: $YAMLPATH/app/gramupload/file.csv
      headers:
        Cache-Control: no-store
  textproc-$*:
    pattern: /$YAMLURL/textproc
    handler: FunctionHandler
    kwargs:
      function: nlg.process_template
      xsrf_cookies: false
      headers:
        Content-Type: application/json
  tmpl-download-$*:
    pattern: /$YAMLURL/tmpl-download
    handler: FunctionHandler
    kwargs:
      function: nlg.download_template
      xsrf_cookies: false
      headers:
        Content-Type: application/octet-stream
        Content-Disposition: attachment; filename="template.py"
